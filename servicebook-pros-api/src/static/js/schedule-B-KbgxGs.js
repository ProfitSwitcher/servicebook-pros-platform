import{j as e,a as d,B as q,b as be}from"./dashboard-C0toryoe.js";import{r as c,X as ye,L as Ne,N as Y,M as F,U as A,b as K,P as Q,W as k,q as M,z as T,C as se,c as fe,H as X,I as Z,l as ve,x as we,F as Ce,J as Se,K as ke,O as ee,E as Me,Q as Te}from"./ui-vendor-ClOptf7u.js";const te=({isOpen:h,onClose:u,settings:y,onSettingsChange:v})=>{const[l,m]=c.useState(y),r=(n,b)=>{m(N=>({...N,[n]:{...N[n],[b]:!N[n][b]}}))},w=()=>{v(l),u()};return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-96 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Calendar settings"}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ye,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time zone"}),e.jsxs("select",{value:l.timezone,onChange:n=>m(b=>({...b,timezone:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"GMT-06:00",children:"(GMT-06:00) Mountain Time - Denver"}),e.jsx("option",{value:"GMT-05:00",children:"(GMT-05:00) Eastern Time - New York"}),e.jsx("option",{value:"GMT-06:00",children:"(GMT-06:00) Central Time - Chicago"}),e.jsx("option",{value:"GMT-08:00",children:"(GMT-08:00) Pacific Time - Los Angeles"}),e.jsx("option",{value:"GMT-05:00",children:"(GMT-05:00) Eastern Time - Miami"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Only display business hours"}),e.jsx("button",{onClick:()=>m(n=>({...n,businessHoursOnly:!n.businessHoursOnly})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.businessHoursOnly?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.businessHoursOnly?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Display US holidays"}),e.jsx("button",{onClick:()=>m(n=>({...n,showHolidays:!n.showHolidays})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.showHolidays?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.showHolidays?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Calendar items options"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"amount",checked:l.displayOptions.amount,onChange:()=>r("displayOptions","amount"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"amount",className:"text-sm text-gray-700",children:"Amount"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"arrivalWindow",checked:l.displayOptions.arrivalWindow,onChange:()=>r("displayOptions","arrivalWindow"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"arrivalWindow",className:"text-sm text-gray-700",children:"Arrival window"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"cityState",checked:l.displayOptions.cityState,onChange:()=>r("displayOptions","cityState"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"cityState",className:"text-sm text-gray-700",children:"City, State"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"customer",checked:l.displayOptions.customer,onChange:()=>r("displayOptions","customer"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"customer",className:"text-sm text-gray-700",children:"Customer"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"description",checked:l.displayOptions.description,onChange:()=>r("displayOptions","description"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"description",className:"text-sm text-gray-700",children:"Description"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"jobName",checked:l.displayOptions.jobName,onChange:()=>r("displayOptions","jobName"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"jobName",className:"text-sm text-gray-700",children:"Job name"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"jobNumber",checked:l.displayOptions.jobNumber,onChange:()=>r("displayOptions","jobNumber"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"jobNumber",className:"text-sm text-gray-700",children:"Job number"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"jobTags",checked:l.displayOptions.jobTags,onChange:()=>r("displayOptions","jobTags"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"jobTags",className:"text-sm text-gray-700",children:"Job tags"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"phoneNumber",checked:l.displayOptions.phoneNumber,onChange:()=>r("displayOptions","phoneNumber"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"phoneNumber",className:"text-sm text-gray-700",children:"Phone number"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"schedule",checked:l.displayOptions.schedule,onChange:()=>r("displayOptions","schedule"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"schedule",className:"text-sm text-gray-700",children:"Schedule"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"street",checked:l.displayOptions.street,onChange:()=>r("displayOptions","street"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"street",className:"text-sm text-gray-700",children:"Street"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"team",checked:l.displayOptions.team,onChange:()=>r("displayOptions","team"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"team",className:"text-sm text-gray-700",children:"Team"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"zipCode",checked:l.displayOptions.zipCode,onChange:()=>r("displayOptions","zipCode"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"zipCode",className:"text-sm text-gray-700",children:"Zip code"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:e.jsx(d,{onClick:w,className:"bg-blue-600 hover:bg-blue-700",children:"Done"})})]})}):null},Le=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"})),ae=({events:h,selectedDate:u,teamCalendars:y})=>{const[v,l]=c.useState(null),[m,r]=c.useState("all"),w=()=>{let t=h;if(u){const g=u.toISOString().split("T")[0];t=t.filter(f=>f.date===g)}return t=t.filter(g=>{const f=y.find($=>$.name.toLowerCase().includes(g.technician?.toLowerCase()||""));return!f||f.enabled}),m!=="all"&&(t=t.filter(g=>g.type===m)),t},n=t=>{switch(t){case"job":return"bg-blue-500";case"estimate":return"bg-orange-500";case"event":return"bg-green-500";default:return"bg-gray-500"}},b=t=>{switch(t){case"job":return e.jsx(k,{className:"w-3 h-3"});case"estimate":return e.jsx(M,{className:"w-3 h-3"});case"event":return e.jsx(T,{className:"w-3 h-3"});default:return e.jsx(se,{className:"w-3 h-3"})}},N=t=>({confirmed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",p=w();return e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-10 flex space-x-2",children:[e.jsxs(d,{variant:m==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),children:["All (",p.length,")"]}),e.jsxs(d,{variant:m==="job"?"default":"outline",size:"sm",onClick:()=>r("job"),children:["Jobs (",p.filter(t=>t.type==="job").length,")"]}),e.jsxs(d,{variant:m==="estimate"?"default":"outline",size:"sm",onClick:()=>r("estimate"),children:["Estimates (",p.filter(t=>t.type==="estimate").length,")"]}),e.jsxs(d,{variant:m==="event"?"default":"outline",size:"sm",onClick:()=>r("event"),children:["Events (",p.filter(t=>t.type==="event").length,")"]})]}),e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex space-x-2",children:[e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Layers"]}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Directions"]})]}),e.jsxs("div",{className:"h-full bg-gradient-to-br from-blue-50 to-blue-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-200",children:e.jsx("div",{className:"absolute inset-4 bg-white rounded border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Schedule Map View"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:u?`Showing events for ${u.toLocaleDateString()}`:"Interactive map showing scheduled jobs and appointments"})]})})}),e.jsx("div",{className:"absolute inset-0 p-8",children:p.map((t,g)=>e.jsxs("div",{className:`absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2 ${v?.id===t.id?"z-20":"z-10"}`,style:{left:`${20+g*12}%`,top:`${25+g*15}%`},onClick:()=>l(t),children:[e.jsx("div",{className:`w-5 h-5 rounded-full ${n(t.type)} border-2 border-white shadow-lg animate-pulse flex items-center justify-center`,children:e.jsx("div",{className:"text-white",children:b(t.type)})}),v?.id===t.id&&e.jsxs("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-xl border p-4 w-80 z-30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t.title}),e.jsx(q,{className:N(t.status),variant:"secondary",children:t.status})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[t.address&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(F,{className:"w-3 h-3 text-gray-500 mt-0.5"}),e.jsx("span",{className:"text-gray-600",children:t.address})]}),t.customer&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:t.customer})]}),t.technician&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-3 h-3 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Tech: ",t.technician]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:t.time})]}),t.phone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:t.phone})]}),t.value&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["Value: $",t.value]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${n(t.type)} text-white`,children:t.type.toUpperCase()})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-3 mt-3 border-t",children:[e.jsxs(d,{size:"sm",className:"flex-1 text-xs",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Directions"]}),t.phone&&e.jsxs(d,{variant:"outline",size:"sm",className:"flex-1 text-xs",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Call"]})]})]})]},t.id))}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Event Types"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-2 h-2 text-white"})}),e.jsx("span",{className:"text-xs text-gray-600",children:"Jobs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-2 h-2 text-white"})}),e.jsx("span",{className:"text-xs text-gray-600",children:"Estimates"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(T,{className:"w-2 h-2 text-white"})}),e.jsx("span",{className:"text-xs text-gray-600",children:"Events"})]})]})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Status"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Cancelled"})]})]})]})]})]}),e.jsxs("div",{className:"w-80 bg-white border-l border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u?`Events for ${u.toLocaleDateString()}`:"All Events"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[p.length," event",p.length!==1?"s":""]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-3",children:[p.map(t=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${v?.id===t.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50 border-gray-200"}`,onClick:()=>l(t),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n(t.type)} flex items-center justify-center`,children:b(t.type)}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t.title})]}),e.jsx(q,{className:N(t.status),variant:"secondary",children:t.status})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-3 h-3"}),e.jsx("span",{children:t.time})]}),t.customer&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-3 h-3"}),e.jsx("span",{children:t.customer})]}),t.technician&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-3 h-3"}),e.jsxs("span",{children:["Tech: ",t.technician]})]}),t.address&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(F,{className:"w-3 h-3 mt-0.5"}),e.jsx("span",{className:"line-clamp-2",children:t.address})]}),t.value&&e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["$",t.value]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${n(t.type)} text-white`,children:t.type.toUpperCase()})]})]})]},t.id)),p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No events found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:u?"No events scheduled for this date":"Try adjusting your filters"})]})]})})]})]})},_e=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),De=()=>{const[h,u]=c.useState(new Date),[y,v]=c.useState(null),[l,m]=c.useState(null),[r,w]=c.useState(!1),[n,b]=c.useState("calendar"),[N,p]=c.useState(""),[t,g]=c.useState(!1),[f,$]=c.useState(!0),[Oe,Ee]=c.useState({team:!0,personal:!0,jobs:!0,estimates:!0}),[le,re]=c.useState({timezone:"GMT-05:00",businessHoursOnly:!0,showHolidays:!0,displayOptions:{amount:!1,arrivalWindow:!0,cityState:!1,customer:!0,description:!1,jobName:!1,jobNumber:!1,jobTags:!1,phoneNumber:!1,schedule:!1,street:!1,team:!0,zipCode:!1}}),[ne,L]=c.useState([]),[Fe,ie]=c.useState([]),[Ae,_]=c.useState(!1),[$e,J]=c.useState(""),ce=[{id:1,title:"HVAC Repair - Johnson Residence",type:"job",date:"2025-09-01",time:"9:00 AM - 11:00 AM",customer:"Sarah Johnson",technician:"Mike Johnson",address:"123 Oak Street, Miami, FL",phone:"(305) 555-0123",status:"confirmed",priority:"high",value:850},{id:2,title:"Plumbing Estimate - Smith Office",type:"estimate",date:"2025-09-12",time:"2:00 PM - 3:00 PM",customer:"John Smith",technician:"Sarah Davis",address:"456 Pine Avenue, Miami, FL",phone:"(305) 555-0456",status:"pending",priority:"medium",value:1200},{id:3,title:"Team Meeting",type:"event",date:"2025-09-14",time:"10:00 AM - 11:00 AM",location:"Office Conference Room",attendees:["Mike Johnson","Sarah Davis","Tom Wilson"],status:"confirmed",priority:"medium"},{id:4,title:"Electrical Work - Davis Home",type:"job",date:"2025-09-14",time:"1:00 PM - 4:00 PM",customer:"Maria Davis",technician:"Tom Wilson",address:"789 Elm Road, Miami, FL",phone:"(305) 555-0789",status:"confirmed",priority:"low",value:650}],de=async()=>{_(!0),J("");try{const[s,a]=await Promise.all([be.getJobs({include_scheduled:!0}),Promise.resolve([])]),x=s.map(i=>({id:i.id,title:`${i.title} - ${i.customer_name||"Customer"}`,type:"job",date:i.scheduled_date?i.scheduled_date.split("T")[0]:null,time:i.scheduled_time||"All Day",customer:i.customer_name,technician:i.assigned_technician,address:i.address,phone:i.customer_phone,status:i.status,priority:i.priority||"medium",value:i.estimated_value||0})).filter(i=>i.date);ie(s),L([...x,...a])}catch(s){console.error("Error loading schedule data:",s),J("Failed to load schedule data"),L(ce)}finally{_(!1)}};c.useEffect(()=>{de()},[]);const D=[{id:"team",name:"Team calendars",color:"#3B82F6",enabled:!0,isParent:!0},{id:"mike",name:"Mike Johnson",color:"#10B981",enabled:!0,isParent:!1},{id:"sarah",name:"Sarah Davis",color:"#F59E0B",enabled:!0,isParent:!1},{id:"tom",name:"Tom Wilson",color:"#EF4444",enabled:!0,isParent:!1},{id:"lisa",name:"Lisa Brown",color:"#8B5CF6",enabled:!0,isParent:!1}],[O,oe]=c.useState(D.reduce((s,a)=>({...s,[a.id]:a.enabled}),{})),G=["January","February","March","April","May","June","July","August","September","October","November","December"],me=["SUN","MON","TUE","WED","THU","FRI","SAT"],H=s=>{const a=s.getFullYear(),x=s.getMonth(),i=new Date(a,x,1),pe=new Date(a,x+1,0).getDate(),B=i.getDay(),S=[];for(let j=0;j<B;j++){const P=new Date(a,x,-B+j+1);S.push({date:P,isCurrentMonth:!1})}for(let j=1;j<=pe;j++)S.push({date:new Date(a,x,j),isCurrentMonth:!0});const je=42-S.length;for(let j=1;j<=je;j++){const P=new Date(a,x+1,j);S.push({date:P,isCurrentMonth:!1})}return S},xe=s=>{switch(s){case"job":return"bg-blue-500";case"estimate":return"bg-orange-500";case"event":return"bg-green-500";default:return"bg-gray-500"}},he=s=>{switch(s){case"job":return e.jsx(k,{className:"w-3 h-3"});case"estimate":return e.jsx(M,{className:"w-3 h-3"});case"event":return e.jsx(T,{className:"w-3 h-3"});default:return e.jsx(se,{className:"w-3 h-3"})}},E=s=>{const a=new Date(h);a.setMonth(h.getMonth()+s),u(a)},z=s=>{const a=new Date;return s.toDateString()===a.toDateString()},I=s=>`${s.getFullYear()}-${s.getMonth()}-${s.getDate()}`,W=(s,a)=>{m(a?s:null)},ue=s=>{v(s),w(!0)},C=s=>{console.log(`Adding ${s} for date:`,y),w(!1)},V=s=>{oe(a=>({...a,[s]:!a[s]}))},ge=s=>{re(s)},R=s=>{console.log(`Connecting to ${s} calendar...`),s==="google"?alert(`Google Calendar Integration Setup Required:

To enable Google Calendar sync, you need to:
1. Create a Google Cloud Project
2. Enable the Google Calendar API
3. Configure OAuth 2.0 credentials
4. Update the client ID in the application

For demo purposes, this would redirect to Google's OAuth flow.
In production, this requires proper backend OAuth handling.`):s==="icloud"&&(alert(`iCloud Calendar Integration Setup Required:

To enable iCloud Calendar sync, you need to:
1. Set up CalDAV server integration
2. Configure iCloud app-specific passwords
3. Implement CalDAV protocol handling

For demo purposes, this shows the integration flow.
In production, this requires server-side CalDAV implementation.`),console.log("iCloud CalDAV integration would be implemented here"))},U=()=>ne.filter(s=>{const a=D.find(x=>x.name.toLowerCase().includes(s.technician?.toLowerCase()||""));return!a||O[a.id]});return e.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Schedule"}),e.jsxs(d,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"New"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700",children:[G[h.getMonth()]," ",h.getFullYear()]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>E(-1),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(1),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Z,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs",children:[["S","M","T","W","T","F","S"].map((s,a)=>e.jsx("div",{className:"text-center text-gray-500 font-medium py-1",children:s},a)),H(h).slice(0,35).map((s,a)=>e.jsx("button",{className:`text-center py-1 text-xs rounded hover:bg-blue-100 ${s.isCurrentMonth?"text-gray-900":"text-gray-400"} ${z(s.date)?"bg-blue-600 text-white":""}`,children:s.date.getDate()},a))]})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Filter by name or tag",value:N,onChange:s=>p(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Areas"}),e.jsx(we,{className:"w-4 h-4 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"team-calendars",checked:O.team,onChange:()=>V("team"),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"team-calendars",className:"text-sm text-gray-700 flex-1",children:"Team calendars"}),e.jsx(Ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("button",{onClick:()=>$(!f),className:"p-1 hover:bg-gray-100 rounded",children:f?e.jsx(Se,{className:"w-4 h-4 text-gray-400"}):e.jsx(ke,{className:"w-4 h-4 text-gray-400"})})]}),f&&D.filter(s=>!s.isParent).map(s=>e.jsxs("div",{className:"flex items-center space-x-2 ml-6",children:[e.jsx("input",{type:"checkbox",id:s.id,checked:O[s.id],onChange:()=>V(s.id),className:"rounded border-gray-300"}),e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:s.color}}),e.jsx("label",{htmlFor:s.id,className:"text-sm text-gray-700 flex-1 cursor-pointer",children:s.name})]},s.id))]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Calendar Sync"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>R("google"),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Connect Google Calendar"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>R("icloud"),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Connect iCloud Calendar"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(d,{variant:"outline",size:"sm",children:"Today"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E(-1),className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>E(1),className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("h1",{className:"text-xl font-semibold text-gray-900",children:[G[h.getMonth()]," ",h.getFullYear()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>b("calendar"),className:`px-3 py-1 text-sm font-medium rounded-md ${n==="calendar"?"bg-blue-600 text-white":"text-gray-600"}`,children:"CALENDAR"}),e.jsx("button",{onClick:()=>b("map"),className:`px-3 py-1 text-sm font-medium rounded-md ${n==="map"?"bg-blue-600 text-white":"text-gray-600"}`,children:"MAP"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{children:"Month"}),e.jsx("option",{children:"Week"}),e.jsx("option",{children:"Day"})]}),e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>g(!0),children:e.jsx(Te,{className:"w-4 h-4"})})]})]})}),n==="calendar"?e.jsxs("div",{className:"flex-1 bg-white",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:me.map((s,a)=>e.jsx("div",{className:"p-4 text-center text-sm font-medium text-gray-500 border-r border-gray-200 last:border-r-0",children:s},a))}),e.jsx("div",{className:"grid grid-cols-7 flex-1",children:H(h).map((s,a)=>{const x=U().filter(o=>o.date===s.date.toISOString().split("T")[0]),i=l&&I(l)===I(s.date);return e.jsxs("div",{className:`min-h-32 border-r border-b border-gray-200 last:border-r-0 p-2 relative cursor-pointer hover:bg-gray-50 ${s.isCurrentMonth?"":"bg-gray-50"} ${z(s.date)?"bg-blue-50":""}`,onMouseEnter:()=>W(s.date,!0),onMouseLeave:()=>W(s.date,!1),onClick:()=>ue(s.date),children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${s.isCurrentMonth?z(s.date)?"text-blue-600":"text-gray-900":"text-gray-400"}`,children:s.date.getDate()}),e.jsxs("div",{className:"space-y-1",children:[x.slice(0,3).map(o=>e.jsx("div",{className:`text-xs p-1 rounded text-white truncate ${xe(o.type)}`,title:`${o.title} - ${o.time}`,children:e.jsxs("div",{className:"flex items-center space-x-1",children:[he(o.type),e.jsx("span",{children:o.title})]})},o.id)),x.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 pl-1",children:["+",x.length-3," more"]})]}),i&&e.jsx("div",{className:"absolute top-2 right-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 z-10",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:o=>{o.stopPropagation(),C("job")},className:"p-1 hover:bg-gray-100 rounded text-xs",title:"Add Job",children:e.jsx(k,{className:"w-3 h-3"})}),e.jsx("button",{onClick:o=>{o.stopPropagation(),C("estimate")},className:"p-1 hover:bg-gray-100 rounded text-xs",title:"Add Estimate",children:e.jsx(M,{className:"w-3 h-3"})}),e.jsx("button",{onClick:o=>{o.stopPropagation(),C("event")},className:"p-1 hover:bg-gray-100 rounded text-xs",title:"Add Event",children:e.jsx(T,{className:"w-3 h-3"})})]})})]},a)})})]}):e.jsx(ae,{events:U(),selectedDate:y,teamCalendars:D.map(s=>({...s,enabled:O[s.id]}))})]}),e.jsx(te,{isOpen:t,onClose:()=>g(!1),settings:le,onSettingsChange:ge}),r&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add to ",y.toLocaleDateString()]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>C("job"),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg border",children:[e.jsx(k,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Job"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Schedule a service job"})]})]}),e.jsxs("button",{onClick:()=>C("estimate"),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg border",children:[e.jsx(M,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Estimate"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Schedule an estimate appointment"})]})]}),e.jsxs("button",{onClick:()=>C("event"),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg border",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Event"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Add a calendar event"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2 mt-6",children:e.jsx(d,{variant:"outline",onClick:()=>w(!1),children:"Cancel"})})]})})]})},Je=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));export{Le as C,_e as S,Je as a};
